#!/bin/bash

sudo apt update
sudo apt upgrade -y

sudo apt install -y make golang ruby-full ruby-dev build-essential chromium python3-pip python-pip python-setuptools python-dev  libffi-dev libcurl4-openssl-dev libssl-dev libxml2 libxml2-dev libxslt1-dev libgmp-dev zlib1g-dev python-dnspython python3-tornado python-tornado python3-jsbeautifier python-jsbeautifier python-netaddr python3-netaddr python-pycurl python3-pycurl python-bs4 python3-bs4 python3-dnspython python-dnspython python-tldextract python3-tldextract python-termcolor python3-termcolor python-future python3-future

sudo apt install -y git rename hashcat jq awscli sublist3r wpscan sqlmap knockpy nmap recon-ng seclists wordlists dirbuster dirb dnsmap fern-wifi-cracker metasploit-framework nmap sqlmap wfuzz set 

pip install safeurl argparse 
sudo apt autoremove -y

#create a tools folder in ~/
mkdir ~/tools ~/bin ~/wordlists ~/output
cd
ln -s ~/pentest/config
ln -s ~/pentest/data
cd ~/tools/
############################
while read -r line
do
    git clone $line
done < ~/data/tools.txt

########
#massdns
cd ~/tools/massdns
make
cd ~/bin
ln -s ~/tools/massdns/bin/massdns
#subfinder
go get github.com/subfinder/subfinder
cd ~/bin
ln -s ~/go/bin/subfinder
#subbrute
ln -s ~/tools/subbrute/subbrute.py
#altdns
pip install py-altdns
#gobuster
go get github.com/OJ/gobuster
cd ~/bin
ln -s ~/go/bin/gobuster
#binarios.txt
cd /tmp
while read -r line
do
    url="https://api.github.com/repos/$line/releases"
    app=`curl $url |jq --raw-output '.[0]|.assets[0].browser_download_url'`
    wget $app
    zip=`curl $url |jq --raw-output '.[0]|.assets[0].name'`
    file1="${line##*/}"
    file=${file1,,}
    unzip -jo $zip "*$file" -d ~/bin
    rm -f $zip    
done < ~/data/binarios.txt
cd

### WORDLIST
cd ~/wordlists

while read -r line
do
    git clone $line
done < ~/data/wordlists.txt

ln -s ~/tools/altdns/words.txt altdns230.txt

cd
##############
cat ~/pentest/bash_aliases > ~/.bash_aliases
source ~/.bash_aliases
source ~/.profile

echo -e "\n\n\n\n\n\n\n\n\n\n\nDone! All tools are set up in ~/tools"
ls -la
echo "One last time: don't forget to set up AWS credentials in ~/.aws/!"
#!/bin/bash

sudo ntpdate -u 0.pool.ntp.org
sudo apt -y update
sudo apt -y upgrade
sudo apt -y dist-upgrade
sudo apt -y autoremove

cd ~/pentest

#update repo git
while read -r line || [ -n "$line" ]
do
    git pull $line
done < ~/data/tools.txt

#update binarios.txt
cd /tmp

while read -r line || [ -n "$line" ]
do
    asset=$(curl -S https://api.github.com/repos/${line}/releases|jq -r '.[0].assets[]|select(.name|test("linux_amd64"))')
    wget $(echo $asset | jq -r '.browser_download_url')
    zip=$(echo $asset |jq -r '.name')
    file=${zip%%_*}
    unzip -jfo $zip "*$file" -d ~/bin
    rm -f $zip    
done < ~/data/binarios.txt
cd

#wordlist
cd ~/wordlists
while read -r line || [ -n "$line" ]
do
    git pull $line
done < ~/data/wordlists.txt

